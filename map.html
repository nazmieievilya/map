<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ukraine Interactive Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      #map {
        height: 100vh;
        width: 100%;
        z-index: 0;
      }
      .buttons {
        display: flex;
        justify-content: center;
        padding: 10px;
        background: #f0f0f0;
        gap: 10px;
        position: absolute;
        width: 100vw;
        z-index: 5;
        bottom: 0;
      }
      .buttons button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="buttons">
      <button id="beforeBtn">Before</button>
      <button id="afterBtn">1918</button>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Approximate bounding box of Ukraine [southWest, northEast]
      const ukraineBounds = [
        [44.38, 22.15], // south-west (lat, lng)
        [52.38, 40.23], // north-east (lat, lng)
      ];

      // Initialize map centered on Ukraine
      const map = L.map("map", {
        center: [48.5, 31.5],
        zoom: 6,
        maxBounds: ukraineBounds, // restrict map to Ukraine
        maxBoundsViscosity: 1.0, // prevent dragging outside
      });

      // Tile layer: Before the war
      const beforeWar = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          attribution: "&copy; OpenStreetMap contributors",
        }
      ).addTo(map);

      // Tile layer: Current map (example HOT style)
      const currentMap = L.tileLayer(
        "https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",
        {
          attribution: "&copy; OpenStreetMap contributors, HOT",
        }
      );

      // Layer control to switch maps
      const baseMaps = {
        "Before the War": beforeWar,
        "Current Map": currentMap,
      };
      L.control.layers(baseMaps).addTo(map);

      // Example marker in Kyiv
      L.marker([50.4501, 30.5234])
        .addTo(map)
        .bindPopup("Kyiv, Ukraine")
        .openPopup();
      const polygonPoints1918 = [
        [49.0, 22.0], // Point 1
        [52.0, 26.0], // Point 1
        [51.7, 28.05], // Point 1
        [54.0, 34.0], // Point 1
        [50.5, 36.0], // Point 1
        [49.5, 40.7], // Point 1
        [48.5, 39.7], // Point 1
        [46.5, 38.7], // Point 1
        [45.5, 40.7], // Point 1
        [44.0, 41.7], // Point 1
        [44.5, 40.9], // Point 1
        [44.7, 37.9], // Point 1
        [44.8, 36.9], // Point 1
        [44.5, 34], // Point 1
        [44.5, 34], // Point 1
        [45.9, 32.8],
        [46.5, 31.8],
        [44.9, 29.8],
        [45.9, 25.8],
      ];
      const polygonPoints2025 = [
        [49.0, 22.0], // Point 1
        [52.0, 26.0], // Point 1
        [51.7, 28.05], // Point 1
        [54.0, 34.0], // Point 1
        [50.5, 36.0], // Point 1
        [49.5, 40.7], // Point 1
        [48.5, 39.7], // Point 1
        [46.5, 38.7], // Point 1
        [45.5, 40.7], // Point 1
        [44.0, 41.7], // Point 1
        [44.5, 40.9], // Point 1
        [44.7, 37.9], // Point 1
        [44.8, 36.9], // Point 1
        [44.5, 34], // Point 1
        [44.5, 34], // Point 1
        [45.9, 32.8],
        [46.5, 31.8],
        [44.9, 29.8],
        [45.9, 25.8],
      ];

      const myPolygon = L.polygon(polygonPoints1918, {
        color: "grey",
        fillColor: "#1E90FF",
        fillOpacity: 0.3,
        weight: 2,
      });

      document.getElementById("beforeBtn").onclick = () => {
        myPolygon.remove();
      };
      document.getElementById("afterBtn").onclick = () => {
        myPolygon.addTo(map);
      };
      myPolygon.bindPopup("This is my custom polygon");
    </script>
  </body>
</html>
